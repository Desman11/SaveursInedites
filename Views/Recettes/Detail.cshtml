@model RecetteAvisViewModel
// Définit le modèle de données passé à la vue (RecetteAvisViewModel).

<div class="aperitif-container">
    <div class="aperitif">
        <!-- Conteneur principal pour la section "apéritif" de la recette -->

        <div class="line-separator"></div>
        <!-- Séparateur visuel (ligne horizontale) -->

        <div class="card-categorie-image">
            <img src="@Model.Recette.photo" width="250" height="250" />
            <!-- Affiche l'image de la recette provenant du modèle -->
        </div>

        <div class="line-separator"></div>
        <!-- Autre séparateur visuel -->

        <ul class="info">
            <!-- Liste des informations principales sur la recette -->
            <li>Préparation : @Model.Recette.temps_preparation</li>
            <li>Cuisson : @Model.Recette.temps_cuisson</li>
            <li>Difficulté : @Model.Recette.difficulte</li>
        </ul>

        <span>Ingrédients :</span>
        <!-- Titre de la section Ingrédients -->
        @if (Model.Recette.Ingredients != null && Model.Recette.Ingredients.Any())
        {
            <!-- Vérifie si la recette a des ingrédients -->
            <ol class="no-number">
                @foreach (var ingredient in Model.Recette.Ingredients)
                {
                    <li>@ingredient.Nom</li>
                    <!-- Affiche chaque ingrédient de la recette -->
                }
            </ol>
        }
        else
        {
            <p>Aucun ingrédient disponible.</p>
            <!-- Message si aucun ingrédient n'est trouvé -->
        }

        <div class="etapeaperitif"></div>
        <!-- Séparateur pour les étapes -->

        <span>Étapes :</span>
        <!-- Titre de la section Étapes -->
        @if (Model.Recette.Etapes != null && Model.Recette.Etapes.Any())
        {
            <!-- Vérifie si la recette a des étapes -->
            <ol class="no-number">
                @foreach (var etape in Model.Recette.Etapes)
                {
                    <li>@etape.texte</li>
                    <!-- Affiche chaque étape de préparation -->
                }
            </ol>
        }
        else
        {
            <p>Aucune étape disponible.</p>
            <!-- Message si aucune étape n'est trouvée -->
        }

        <div class="avis-section">
            <!-- Section pour les avis des utilisateurs -->
            <h3>Notes des utilisateurs</h3>
            <p>Moyenne des notes : <strong>@ViewData["Moyenne"] / 5</strong></p>
            <!-- Affiche la moyenne des notes -->
            @if (Model.AvisExistants is List<AvisViewModel> avisList && Model.AvisExistants.Count > 0)
            {
                <!-- Vérifie s'il existe des avis -->
                <ul>
                    @foreach (var avis in avisList)
                    {
                        <li>
                            <strong>Note :</strong> @avis.Note / 5<br />
                            <strong>Commentaire :</strong> @avis.Commentaire
                            <!-- Affiche chaque avis avec sa note et son commentaire -->
                        </li>
                    }
                </ul>
            }
            else
            {
                <p>Aucune note pour cette recette pour le moment.</p>
                <!-- Message si aucun avis n'existe -->
            }
        </div>

        <hr />
        <!-- Séparateur horizontal -->

        <h2>Commentaire</h2>
        <!-- Titre pour la section de commentaire -->

        <form asp-controller="Recettes" asp-action="AjouterAvis" method="post">
            <!-- Formulaire pour ajouter un nouvel avis -->

            <input type="hidden" asp-for="NouvelAvis.id_recette" />
            <!-- Champ caché pour envoyer l'id de la recette avec l'avis -->

            <div>
                <label for="Note">Note (sur 5)</label>
                <input type="number" asp-for="NouvelAvis.Note" min="1" max="5" required />
                <!-- Champ pour saisir une note entre 1 et 5 -->
            </div>
            <div>
                <textarea asp-for="NouvelAvis.Commentaire" rows="4" cols="50" placeholder="Laissez votre commentaire ici..."></textarea>
                <!-- Champ pour saisir un commentaire -->

                <span asp-validation-for="NouvelAvis.Commentaire" class="text-danger"></span>
                <!-- Affiche les erreurs de validation pour le champ commentaire -->
            </div>

            <button type="submit">Envoyer le commentaire</button>
            <!-- Bouton pour soumettre le formulaire -->
        </form>

    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <!-- Inclut les scripts de validation pour le formulaire -->
}
